package com.example.konttragenty;
import javax.servlet.*; import javax.servlet.http.*; import java.io.*; import java.sql.SQLException; import java.util.*;
public class PersonServlet extends HttpServlet { private PersonDAO dao=new PersonDAO(); protected void doGet(HttpServletRequest req,HttpServletResponse resp)throws ServletException,IOException{ try{ List<Person> list=dao.getAll(); req.setAttribute("persons",list);}catch(SQLException e){throw new ServletException(e);} req.getRequestDispatcher("kontragenty.jsp").forward(req,resp);} protected void doPost(HttpServletRequest req,HttpServletResponse resp)throws ServletException,IOException{ int id=Integer.parseInt(req.getParameter("id")); String field=req.getParameter("field"), value=req.getParameter("value"); try{dao.updateField(id,field,value);resp.setStatus(HttpServletResponse.SC_OK);}catch(SQLException e){resp.sendError(HttpServletResponse.SC_INTERNAL_SERVER_ERROR,e.getMessage());}}}